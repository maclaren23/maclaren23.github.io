"use strict";function _createForOfIteratorHelper(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,e=function(){};return{s:e,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return n=t.done,t},e:function(t){s=!0,o=t},f:function(){try{n||null==r.return||r.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function showModal(){var e=document.querySelector(".modal-signin"),r=document.querySelector(".modal-reg"),a=document.querySelector(".modal-sendmsg");document.addEventListener("click",function(t){t=t.target;t.preventDefault,t.hasAttribute("data-signin")&&e.classList.add("modal-view"),t.hasAttribute("data-register")&&r.classList.add("modal-view"),t.hasAttribute("data-sendMsg")&&a.classList.add("modal-view"),t.hasAttribute("data-close")&&(e.classList.remove("modal-view"),r.classList.remove("modal-view"),a.classList.remove("modal-view"))})}showModal();var api_url="https://academy.directlinedev.com/api";function getUserFormData(t){switch(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"json"){case"json":var e,r={},a=_createForOfIteratorHelper(t.querySelectorAll("input"));try{for(a.s();!(e=a.n()).done;){var o=e.value;r[o.name]=o.value}}catch(t){a.e(t)}finally{a.f()}return JSON.stringify(r);case"formData":var n=new FormData(t);return console.log(n),n;default:throw new Error("getUserFormData fn: Incorrect data type")}}function sendRequest(t){var e=t.endpoint,r=t.method,a=t.headers,t=t.body,t={method:void 0===r?"GET":r,headers:void 0===a?null:a,body:void 0===t?null:t};return fetch("".concat(api_url).concat(e),t)}function findToken(){var t=localStorage.getItem("token"),e=document.querySelector(".js-btn-signin"),r=document.querySelector(".js-btn-register"),a=document.querySelector(".js-btn-profile");if(!t)return!1;e.classList.add("hidden"),r.classList.add("hidden"),a.classList.remove("hidden")}findToken();var postWrapper=document.querySelector(".post"),preloader=document.querySelector(".preloader");fetch("".concat(api_url,"/posts?limit=5")).then(function(t){return t.json()}).then(function(t){t.data.forEach(function(t){var e="https://academy.directlinedev.com",r=new Date(t.date),r=("0"+r.getDate()).slice(-2)+"."+("0"+(r.getMonth()+1)).slice(-2)+"."+r.getFullYear(),r='\n        <div class="post__wrapper">\n          <div class="post__img">\n            <picture>\n              <source srcset="'.concat(e+t.mobilePhotoUrl,", ").concat(e+t.mobile2xPhotoUrl,' 2x" media="(max-width: 700px)">\n              <source srcset="').concat(e+t.tabletPhotoUrl,", ").concat(e+t.tablet2xPhotoUrl,' 2x" media="(max-width: 1024px)">\n              <img loading="lazy" srcset="').concat(e+t.desktopPhotoUrl,", ").concat(e+t.desktop2xPhotoUrl,' 2x" class="post__pic"  alt="post picture">\n            </picture>\n          </div>\n          <div class="post__content">\n            <div class="post__tags">\n              \n            </div>\n            <div class="post__info">\n              <div class="post__date">').concat(r,'</div>\n              <div class="post__views">').concat(t.views,' views</div>\n              <div class="post__comments">').concat(t.commentsCount,' comments</div>\n            </div>\n            <h2 class="post__title">').concat(t.title,'</h2>\n            <p class="post__txt">').concat(t.text,'</p>\n            <a href="" class="post__link">Go to this post</a>\n          </div>\n        </div>\n      ');preloader.classList.remove("active"),postWrapper.insertAdjacentHTML("afterbegin",r),t.tags.forEach(function(t){var e=document.querySelector(".post__tags"),t=t.tag.color,t='<div class="post__tag"  style="background:'.concat(t,'"></div>');e.insertAdjacentHTML("afterbegin",t)})})}).catch(function(t){console.log(t)});var filterForm=document.forms.filterForm;if(window.location.search){var _step2,params={},arrParams=window.location.search.substring(1).split("&"),_iterator2=_createForOfIteratorHelper(arrParams);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var stringParam=_step2.value,param=stringParam.split("="),paramKey=param[0],paramValue=param[1];paramKey in params?params[paramKey].push(paramValue):params[paramKey]=[paramValue]}}catch(t){_iterator2.e(t)}finally{_iterator2.f()}var updateInputs=function(t,e){var r,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var o,n=r.value,s=_createForOfIteratorHelper(params[e]);try{for(s.s();!(o=s.n()).done;)o.value===n.value&&(n.checked=!0)}catch(t){s.e(t)}finally{s.f()}}}catch(t){a.e(t)}finally{a.f()}};updateInputs(filterForm.views,"views"),updateInputs(filterForm.comments,"comments"),updateInputs(filterForm.limit,"limit"),updateInputs(filterForm.sort,"sort")}filterForm.addEventListener("submit",function(t){t.preventDefault();function e(t,e){t.forEach(function(t){t.checked&&r.push("".concat(e,"=").concat(t.value))})}var r=[];console.log(r),e(t.target.views,"views"),e(t.target.comments,"comments"),e(t.target.limit,"limit"),e(t.target.sort,"sort");t="".concat(window.location.origin).concat(window.location.pathname,"?").concat(r.toString().replaceAll(",","&"));window.history.pushState({},"",t)});